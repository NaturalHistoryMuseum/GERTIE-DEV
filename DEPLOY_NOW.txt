# DEPLOYMENT via sync_to_slaves.sh ONLY

Date: 2026-01-15
Commits: 
  - 9e31dd1: Fix rep8 still capture port (6010 instead of 6000)
  - 0a14cc2: Add diagnostic logging for rep3 small captures

## MANDATORY STEPS (NO ALTERNATIVES):

1. Copy camera_system_integrated_final to USB:
   ```
   cp -r ~/Desktop/GERTIE_WORKSPACE/01_ACTIVE_PROJECTS/camera_system_integrated_final /Volumes/USB/
   ```

2. On control1:
   ```
   cp -r /media/USB/camera_system_integrated_final /home/andrc1/
   cd /home/andrc1/camera_system_integrated_final
   ./sync_to_slaves.sh
   ```

3. Restart local camera service (for rep8 fix):
   ```
   sudo systemctl restart local_camera_slave.service
   ```

4. Start GUI and test:
   ```
   ./run_gui_with_logging.sh
   ```

5. TEST CAPTURE - Press SPACE or C to capture all 8 cameras

6. Check captured images:
   ```
   ls -la ~/Desktop/captured_images/
   ```

7. Check rep3 logs if small file:
   ```
   ssh rep3 "journalctl -u still_capture.service -n 30 --no-pager"
   ```

8. Copy log back:
   ```
   cp /home/andrc1/Desktop/updatelog.txt /media/USB/
   ```

## EXPECTED RESULTS:

✅ rep8 (local camera) should now send hi-res captures (was broken - sent to wrong port)
✅ rep1, rep2, rep4, rep5, rep6, rep7 should continue working (~1.7MB each)
⚠️ rep3 may still have small captures - check logs for "SMALL FILE WARNING"

## DIAGNOSTIC OUTPUT TO LOOK FOR:

If rep3 produces small file, logs will show:
```
[SLAVE] ⚠️ SMALL FILE WARNING: filename only XXXX bytes - expected >1MB
[SLAVE] Image array shape: (height, width, channels)
[SLAVE] Processed shape: (height, width, channels)
```

This tells us if the camera is returning a small image or if processing is shrinking it.

## DO NOT:
- Use any other deployment method
- Run individual scp commands
- Modify sync_to_slaves.sh
